<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®æJedisæ¡ˆä¾‹å‡ºç°é—®é¢˜ï¼Œæœ‰å¤§ä½¬å¸®æˆ‘çœ‹çœ‹æ€ä¹ˆè§£å†³å—ï¼Ÿå…ˆæ„Ÿè°¢å¤§ä½¬ç‚¹è¿›æ¥çœ‹äº†---Day31' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>æJedisæ¡ˆä¾‹å‡ºç°é—®é¢˜ï¼Œæœ‰å¤§ä½¬å¸®æˆ‘çœ‹çœ‹æ€ä¹ˆè§£å†³å—ï¼Ÿå…ˆæ„Ÿè°¢å¤§ä½¬ç‚¹è¿›æ¥çœ‹äº†---Day31</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»CeliaToddæä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/hpcz190911/p/12004053.html</div><br>
    <p><span style="font-size: 18px;">ä»Šå¤©å­¦äº†Jedisçš„ç›¸å…³å†…å®¹,ç„¶ååšäº†ä¸€ä¸ªæ¡ˆä¾‹,ä½†æ˜¯å‡ºç°äº†é”™è¯¯ï¼Œç„¶åæˆ‘ç™¾åº¦äº†ä¸€æ™šä¸Šæ²¡æœ‰è§£å†³ï¼Œæƒ³åˆ°çœ‹çœ‹å‘ä¸ªåšå®¢èƒ½ä¸èƒ½æœ‰å¤§ä½¬å¸®æˆ‘çœ‹ä¸€ä¸‹é—®é¢˜å‡ºç°åœ¨å“ªé‡Œï¼Œç™¾åº¦äº†ä¸€æ™šä¸Šæœ‰ç‚¹æ‡µé€¼ã€‚æ±‚å¤§ä½¬å¸®æˆ‘è§£å†³ï¼Œåœ¨è¿™å°å¼Ÿæˆ‘å…ˆä¸‡åˆ†æ„Ÿè°¢å¤§ä½¬ä»¬ç‚¹è¿›æ¥å¸®æˆ‘çœ‹ï¼Œæ„Ÿè°¢å¤§ä½¬ä»¬~</span></p>
<p><span style="font-size: 18px;"><strong>ä¸‹é¢æ˜¯æ¡ˆä¾‹éœ€æ±‚</strong>ï¼š</span></p>
<p><span style="font-size: 18px;">ã€€ã€€æ¡ˆä¾‹éœ€æ±‚ï¼š</span><br /><span style="font-size: 18px;">	ã€€ã€€ã€€ã€€1. æä¾›index.htmlé¡µé¢ï¼Œé¡µé¢ä¸­æœ‰ä¸€ä¸ªçœä»½ ä¸‹æ‹‰åˆ—è¡¨</span><br /><span style="font-size: 18px;">	ã€€ã€€ã€€ã€€2. å½“ é¡µé¢åŠ è½½å®Œæˆå å‘é€ajaxè¯·æ±‚ï¼ŒåŠ è½½æ‰€æœ‰çœä»½</span></p>
<p><span style="font-size: 18px;">å‡ºç°çš„é”™è¯¯ï¼šä¸ºå•¥ä¸ä¸€æ ·çš„æµè§ˆå™¨ä¼šå‡ºç°ä¸ä¸€æ ·çš„é”™è¯¯ï¼Œæˆ‘éƒ½è¢«ææ‡µäº†ï¼Œè¿™æ˜¯è¦å­¦åˆ°æ”¾å¼ƒå•Š~ä½†æ˜¯æˆ‘ä¸ä¼šæ”¾å¼ƒçš„ï¼Œæ±‚å¤§ä½¬å¸®æˆ‘çœ‹çœ‹å“ªé‡Œå‡ºé—®é¢˜äº†ğŸ™ğŸ™</span></p>
<p><span style="font-size: 18px;">ã€€ã€€chromeæµè§ˆå™¨å‡ºç°çš„é”™è¯¯</span></p>
<p><span style="font-size: 18px;"><img src="./images/æJedisæ¡ˆä¾‹å‡ºç°é—®é¢˜ï¼Œæœ‰å¤§ä½¬å¸®æˆ‘çœ‹çœ‹æ€ä¹ˆè§£å†³å—ï¼Ÿå…ˆæ„Ÿè°¢å¤§ä½¬ç‚¹è¿›æ¥çœ‹äº†---Day310.png" alt="" /></span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;">ã€€ã€€Microsoft edgeæµè§ˆå™¨å‡ºç°çš„é”™è¯¯</span></p>
<p><span style="font-size: 18px;"><img src="./images/æJedisæ¡ˆä¾‹å‡ºç°é—®é¢˜ï¼Œæœ‰å¤§ä½¬å¸®æˆ‘çœ‹çœ‹æ€ä¹ˆè§£å†³å—ï¼Ÿå…ˆæ„Ÿè°¢å¤§ä½¬ç‚¹è¿›æ¥çœ‹äº†---Day311.png" alt="" /></span></p>
<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;"><strong>ä¸‹é¢æ˜¯æˆ‘çš„ä»£ç </strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.domain;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> Province {
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> id;
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> String name;
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> Province() {
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">public</span> Province(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id, String name) {
</span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;
</span><span style="color: #008080;">12</span>         <span style="color: #0000ff;">this</span>.name =<span style="color: #000000;"> name;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> getId() {
</span><span style="color: #008080;">16</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> id;
</span><span style="color: #008080;">17</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setId(<span style="color: #0000ff;">int</span><span style="color: #000000;"> id) {
</span><span style="color: #008080;">20</span>         <span style="color: #0000ff;">this</span>.id =<span style="color: #000000;"> id;
</span><span style="color: #008080;">21</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String getName() {
</span><span style="color: #008080;">24</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> name;
</span><span style="color: #008080;">25</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">26</span> 
<span style="color: #008080;">27</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setName(String name) {
</span><span style="color: #008080;">28</span>         <span style="color: #0000ff;">this</span>.name =<span style="color: #000000;"> name;
</span><span style="color: #008080;">29</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">30</span> 
<span style="color: #008080;">31</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">32</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String toString() {
</span><span style="color: #008080;">33</span>         <span style="color: #0000ff;">return</span> "Province{" +
<span style="color: #008080;">34</span>                 "id=" + id +
<span style="color: #008080;">35</span>                 ", name='" + name + '\'' +
<span style="color: #008080;">36</span>                 '}'<span style="color: #000000;">;
</span><span style="color: #008080;">37</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">38</span> }</span></code></pre>

<p><span style="font-size: 18px;"><strong>æ•°æ®åº“ç±»ï¼š</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.dao;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.domain.Province;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> ProvinceDao {
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> List&lt;Province&gt;<span style="color: #000000;"> findAll();
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> }</span></code></pre>

<p><span style="font-size: 18px;">&nbsp;</span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.dao.impl;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.dao.ProvinceDao;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.domain.Province;
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.util.JDBCUtils;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.jdbc.core.BeanPropertyRowMapper;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> org.springframework.jdbc.core.JdbcTemplate;
</span><span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ProvinceDaoImpl <span style="color: #0000ff;">implements</span><span style="color: #000000;"> ProvinceDao {
</span><span style="color: #008080;">12</span>     <span style="color: #008000;">//</span><span style="color: #008000;">1.å£°æ˜æˆå‘˜å˜é‡ jdbctemplement</span>
<span style="color: #008080;">13</span>     <span style="color: #0000ff;">private</span> JdbcTemplate template = <span style="color: #0000ff;">new</span><span style="color: #000000;"> JdbcTemplate(JDBCUtils.getDataSource());
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">public</span> List&lt;Province&gt;<span style="color: #000000;"> findAll() {
</span><span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">1.å®šä¹‰sql</span>
<span style="color: #008080;">18</span>         String sql = "select * from province "<span style="color: #000000;">;
</span><span style="color: #008080;">19</span>         <span style="color: #008000;">//</span><span style="color: #008000;">2.æ‰§è¡Œsql</span>
<span style="color: #008080;">20</span>         List&lt;Province&gt; list = template.query(sql, <span style="color: #0000ff;">new</span> BeanPropertyRowMapper&lt;Province&gt;(Province.<span style="color: #0000ff;">class</span><span style="color: #000000;">));
</span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> list;
</span><span style="color: #008080;">22</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">23</span> }</span></code></pre>

<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;"><strong>JDBCå·¥å…·ç±»</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.util;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> com.alibaba.druid.pool.DruidDataSourceFactory;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.sql.DataSource;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.InputStream;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.Connection;
</span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.sql.SQLException;
</span><span style="color: #008080;">10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Properties;
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> JDBCUtils {
</span><span style="color: #008080;">13</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> DataSource ds ;
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>     <span style="color: #0000ff;">static</span><span style="color: #000000;"> {
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">18</span>             <span style="color: #008000;">//</span><span style="color: #008000;">1.åŠ è½½é…ç½®æ–‡ä»¶</span>
<span style="color: #008080;">19</span>             Properties pro = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Properties();
</span><span style="color: #008080;">20</span>             <span style="color: #008000;">//</span><span style="color: #008000;">ä½¿ç”¨ClassLoaderåŠ è½½é…ç½®æ–‡ä»¶ï¼Œè·å–å­—èŠ‚è¾“å…¥æµ</span>
<span style="color: #008080;">21</span>             InputStream is = JDBCUtils.<span style="color: #0000ff;">class</span>.getClassLoader().getResourceAsStream("druid.properties"<span style="color: #000000;">);
</span><span style="color: #008080;">22</span> <span style="color: #000000;">            pro.load(is);
</span><span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2.åˆå§‹åŒ–è¿æ¥æ± å¯¹è±¡</span>
<span style="color: #008080;">25</span>             ds =<span style="color: #000000;"> DruidDataSourceFactory.createDataSource(pro);
</span><span style="color: #008080;">26</span> 
<span style="color: #008080;">27</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {
</span><span style="color: #008080;">28</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">29</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
</span><span style="color: #008080;">30</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">31</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">32</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">33</span> 
<span style="color: #008080;">34</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">35</span> <span style="color: #008000;">     * è·å–è¿æ¥æ± å¯¹è±¡
</span><span style="color: #008080;">36</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">37</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> DataSource getDataSource(){
</span><span style="color: #008080;">38</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> ds;
</span><span style="color: #008080;">39</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">40</span> 
<span style="color: #008080;">41</span> 
<span style="color: #008080;">42</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">43</span> <span style="color: #008000;">     * è·å–è¿æ¥Connectionå¯¹è±¡
</span><span style="color: #008080;">44</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">45</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> Connection getConnection() <span style="color: #0000ff;">throws</span><span style="color: #000000;"> SQLException {
</span><span style="color: #008080;">46</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;">  ds.getConnection();
</span><span style="color: #008080;">47</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">48</span> }</span></code></pre>

<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;"><strong>Jediså·¥å…·ç±»</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.jedis;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> redis.clients.jedis.Jedis;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> redis.clients.jedis.JedisPool;
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> redis.clients.jedis.JedisPoolConfig;
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.InputStream;
</span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.Properties;
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> JedisPoolUtils {
</span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> JedisPool jedisPool;
</span><span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span>     <span style="color: #0000ff;">static</span><span style="color: #000000;">{
</span><span style="color: #008080;">15</span>         <span style="color: #008000;">//</span><span style="color: #008000;">è¯»å–é…ç½®æ–‡ä»¶</span>
<span style="color: #008080;">16</span>         InputStream is = JedisPoolUtils.<span style="color: #0000ff;">class</span>.getClassLoader().getResourceAsStream("jedis.properties"<span style="color: #000000;">);
</span><span style="color: #008080;">17</span>         <span style="color: #008000;">//</span><span style="color: #008000;">åˆ›å»ºPropertieså¯¹è±¡</span>
<span style="color: #008080;">18</span>         Properties pro = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Properties();
</span><span style="color: #008080;">19</span>         <span style="color: #008000;">//</span><span style="color: #008000;">å…³è”æ–‡ä»¶</span>
<span style="color: #008080;">20</span>         <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">21</span> <span style="color: #000000;">            pro.load(is);
</span><span style="color: #008080;">22</span>         } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (IOException e) {
</span><span style="color: #008080;">23</span> <span style="color: #000000;">            e.printStackTrace();
</span><span style="color: #008080;">24</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">25</span>         <span style="color: #008000;">//</span><span style="color: #008000;">è·å–æ•°æ®ï¼Œè®¾ç½®åˆ°JedisPoolConfigä¸­</span>
<span style="color: #008080;">26</span>         JedisPoolConfig config = <span style="color: #0000ff;">new</span><span style="color: #000000;"> JedisPoolConfig();
</span><span style="color: #008080;">27</span>         config.setMaxTotal(Integer.parseInt(pro.getProperty("maxTotal"<span style="color: #000000;">)));
</span><span style="color: #008080;">28</span>         config.setMaxIdle(Integer.parseInt(pro.getProperty("maxIdle"<span style="color: #000000;">)));
</span><span style="color: #008080;">29</span> 
<span style="color: #008080;">30</span>         <span style="color: #008000;">//</span><span style="color: #008000;">åˆå§‹åŒ–JedisPool</span>
<span style="color: #008080;">31</span>         jedisPool = <span style="color: #0000ff;">new</span> JedisPool(config,pro.getProperty("host"),Integer.parseInt(pro.getProperty("port"<span style="color: #000000;">)));
</span><span style="color: #008080;">32</span> 
<span style="color: #008080;">33</span> 
<span style="color: #008080;">34</span> 
<span style="color: #008080;">35</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">36</span> 
<span style="color: #008080;">37</span> 
<span style="color: #008080;">38</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">39</span> <span style="color: #008000;">     * è·å–è¿æ¥æ–¹æ³•
</span><span style="color: #008080;">40</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">41</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span><span style="color: #000000;"> Jedis getJedis(){
</span><span style="color: #008080;">42</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> jedisPool.getResource();
</span><span style="color: #008080;">43</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">44</span> }</span></code></pre>

<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;"><strong>serviceç±»</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.service;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.domain.Province;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">interface</span><span style="color: #000000;"> ProvinceService {
</span><span style="color: #008080;"> 8</span>     <span style="color: #0000ff;">public</span> List&lt;Province&gt;<span style="color: #000000;"> findAll();
</span><span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String findAllJson();
</span><span style="color: #008080;">11</span> }</span></code></pre>

<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.service.impl;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.dao.ProvinceDao;
</span><span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.dao.impl.ProvinceDaoImpl;
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.domain.Province;
</span><span style="color: #008080;"> 6</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.jedis.JedisPoolUtils;
</span><span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.service.ProvinceService;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> com.fasterxml.jackson.core.JsonProcessingException;
</span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> com.fasterxml.jackson.databind.ObjectMapper;
</span><span style="color: #008080;">10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> redis.clients.jedis.Jedis;
</span><span style="color: #008080;">11</span> 
<span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.util.List;
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ProvinceServiceImpl <span style="color: #0000ff;">implements</span><span style="color: #000000;"> ProvinceService {
</span><span style="color: #008080;">16</span>     <span style="color: #008000;">//</span><span style="color: #008000;">å£°æ˜dao</span>
<span style="color: #008080;">17</span>     <span style="color: #0000ff;">private</span> ProvinceDao dao = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ProvinceDaoImpl();
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">20</span>     <span style="color: #0000ff;">public</span> List&lt;Province&gt;<span style="color: #000000;"> findAll() {
</span><span style="color: #008080;">21</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> dao.findAll();
</span><span style="color: #008080;">22</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span>     <span style="color: #008000;">/**</span>
<span style="color: #008080;">25</span> <span style="color: #008000;">     ä½¿ç”¨redisç¼“å­˜
</span><span style="color: #008080;">26</span>      <span style="color: #008000;">*/</span>
<span style="color: #008080;">27</span> 
<span style="color: #008080;">28</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">29</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> String findAllJson() {
</span><span style="color: #008080;">30</span>         <span style="color: #008000;">//</span><span style="color: #008000;">1.å…ˆä»redisä¸­æŸ¥è¯¢æ•°æ®
</span><span style="color: #008080;">31</span>         <span style="color: #008000;">//</span><span style="color: #008000;">1.1è·å–rediså®¢æˆ·ç«¯è¿æ¥</span>
<span style="color: #008080;">32</span>         Jedis jedis =<span style="color: #000000;"> JedisPoolUtils.getJedis();
</span><span style="color: #008080;">33</span>         String province_json = jedis.get("province"<span style="color: #000000;">);
</span><span style="color: #008080;">34</span> 
<span style="color: #008080;">35</span>         <span style="color: #008000;">//</span><span style="color: #008000;">2åˆ¤æ–­ province_json æ•°æ®æ˜¯å¦ä¸ºnull</span>
<span style="color: #008080;">36</span>         <span style="color: #0000ff;">if</span>(province_json == <span style="color: #0000ff;">null</span> || province_json.length() == 0<span style="color: #000000;">){
</span><span style="color: #008080;">37</span>             <span style="color: #008000;">//</span><span style="color: #008000;">redisä¸­æ²¡æœ‰æ•°æ®</span>
<span style="color: #008080;">38</span>             System.out.println("redisä¸­æ²¡æ•°æ®ï¼ŒæŸ¥è¯¢æ•°æ®åº“..."<span style="color: #000000;">);
</span><span style="color: #008080;">39</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2.1ä»æ•°æ®ä¸­æŸ¥è¯¢</span>
<span style="color: #008080;">40</span>             List&lt;Province&gt; ps =<span style="color: #000000;"> dao.findAll();
</span><span style="color: #008080;">41</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2.2å°†liståºåˆ—åŒ–ä¸ºjson</span>
<span style="color: #008080;">42</span>             ObjectMapper mapper = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ObjectMapper();
</span><span style="color: #008080;">43</span>             <span style="color: #0000ff;">try</span><span style="color: #000000;"> {
</span><span style="color: #008080;">44</span>                 province_json =<span style="color: #000000;"> mapper.writeValueAsString(ps);
</span><span style="color: #008080;">45</span>             } <span style="color: #0000ff;">catch</span><span style="color: #000000;"> (JsonProcessingException e) {
</span><span style="color: #008080;">46</span> <span style="color: #000000;">                e.printStackTrace();
</span><span style="color: #008080;">47</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">48</span> 
<span style="color: #008080;">49</span>             <span style="color: #008000;">//</span><span style="color: #008000;">2.3 å°†jsonæ•°æ®å­˜å…¥redis</span>
<span style="color: #008080;">50</span>             jedis.set("province"<span style="color: #000000;">,province_json);
</span><span style="color: #008080;">51</span>             <span style="color: #008000;">//</span><span style="color: #008000;">å½’è¿˜è¿æ¥</span>
<span style="color: #008080;">52</span> <span style="color: #000000;">            jedis.close();
</span><span style="color: #008080;">53</span> 
<span style="color: #008080;">54</span>         }<span style="color: #0000ff;">else</span><span style="color: #000000;">{
</span><span style="color: #008080;">55</span>             System.out.println("redisä¸­æœ‰æ•°æ®ï¼ŒæŸ¥è¯¢ç¼“å­˜..."<span style="color: #000000;">);
</span><span style="color: #008080;">56</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">57</span> 
<span style="color: #008080;">58</span> 
<span style="color: #008080;">59</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> province_json;
</span><span style="color: #008080;">60</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">61</span> }</span></code></pre>

<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;"><strong>servletç±»</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">package</span><span style="color: #000000;"> cn.local.web.servlet;
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.service.ProvinceService;
</span><span style="color: #008080;"> 5</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> cn.local.service.impl.ProvinceServiceImpl;
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.ServletException;
</span><span style="color: #008080;"> 8</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.annotation.WebServlet;
</span><span style="color: #008080;"> 9</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServlet;
</span><span style="color: #008080;">10</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServletRequest;
</span><span style="color: #008080;">11</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> javax.servlet.http.HttpServletResponse;
</span><span style="color: #008080;">12</span> <span style="color: #0000ff;">import</span><span style="color: #000000;"> java.io.IOException;
</span><span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> @WebServlet("/provinceServlet"<span style="color: #000000;">)
</span><span style="color: #008080;">15</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> ProvinceServlet <span style="color: #0000ff;">extends</span><span style="color: #000000;"> HttpServlet {
</span><span style="color: #008080;">16</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> doPost(HttpServletRequest request, HttpServletResponse response) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IOException {
</span><span style="color: #008080;">17</span>        <span style="color: #008000;">/*</span><span style="color: #008000;"> //1.è°ƒç”¨serviceæŸ¥è¯¢
</span><span style="color: #008080;">18</span> <span style="color: #008000;">        ProvinceService service = new ProvinceServiceImpl();
</span><span style="color: #008080;">19</span> <span style="color: #008000;">        List&lt;Province&gt; list = service.findAll();
</span><span style="color: #008080;">20</span> <span style="color: #008000;">        //2.åºåˆ—åŒ–listä¸ºjson
</span><span style="color: #008080;">21</span> <span style="color: #008000;">        ObjectMapper mapper = new ObjectMapper();
</span><span style="color: #008080;">22</span> <span style="color: #008000;">        String json = mapper.writeValueAsString(list);</span><span style="color: #008000;">*/</span>
<span style="color: #008080;">23</span> 
<span style="color: #008080;">24</span>         <span style="color: #008000;">//</span><span style="color: #008000;">1.è°ƒç”¨serviceæŸ¥è¯¢</span>
<span style="color: #008080;">25</span>         ProvinceService service = <span style="color: #0000ff;">new</span><span style="color: #000000;"> ProvinceServiceImpl();
</span><span style="color: #008080;">26</span>         String json =<span style="color: #000000;"> service.findAllJson();
</span><span style="color: #008080;">27</span> 
<span style="color: #008080;">28</span> 
<span style="color: #008080;">29</span> <span style="color: #000000;">        System.out.println(json);
</span><span style="color: #008080;">30</span>         <span style="color: #008000;">//</span><span style="color: #008000;">3.å“åº”ç»“æœ</span>
<span style="color: #008080;">31</span>         response.setContentType("application/json;charset=utf-8"<span style="color: #000000;">);
</span><span style="color: #008080;">32</span> <span style="color: #000000;">        response.getWriter().write(json);
</span><span style="color: #008080;">33</span> 
<span style="color: #008080;">34</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">35</span> 
<span style="color: #008080;">36</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> doGet(HttpServletRequest request, HttpServletResponse response) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> ServletException, IOException {
</span><span style="color: #008080;">37</span>         <span style="color: #0000ff;">this</span><span style="color: #000000;">.doPost(request, response);
</span><span style="color: #008080;">38</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">39</span> }</span></code></pre>

<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;"><strong>Htmlæ–‡ä»¶</strong></span></p>
<src class="cnblogs_code">
<pre><code><span style="font-size: 18px;"><span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html </span><span style="color: #ff0000;">lang</span><span style="color: #0000ff;">="en"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">charset</span><span style="color: #0000ff;">="UTF-8"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>Title<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="js/jquery-3.3.1.min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>

    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
        $(</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {

            </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">å‘é€ajaxè¯·æ±‚ï¼ŒåŠ è½½æ‰€æœ‰çœä»½æ•°æ®</span>
<span style="background-color: #f5f5f5; color: #000000;">            $.get(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">provinceServlet</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">,{},</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (data) {
                </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">[{"id":1,"name":"åŒ—äº¬"},{"id":2,"name":"ä¸Šæµ·"},{"id":3,"name":"å¹¿å·"},{"id":4,"name":"é™•è¥¿"}]</span>

                <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">1.è·å–select</span>
                <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> province </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> $(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">#province</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">);
                </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">2.éå†jsonæ•°ç»„</span>
<span style="background-color: #f5f5f5; color: #000000;">                $(data).each(</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
                    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">3.åˆ›å»º&lt;option&gt;</span>
                    <span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> option </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">&lt;option name='</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.id</span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">'&gt;</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #0000ff;">this</span><span style="background-color: #f5f5f5; color: #000000;">.name</span><span style="background-color: #f5f5f5; color: #000000;">+</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">&lt;/option&gt;</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">;

                    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">4.è°ƒç”¨selectçš„appendè¿½åŠ option</span>
<span style="background-color: #f5f5f5; color: #000000;">                    province.append(option);
                });


            });

        });


    </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>



<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">select </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="province"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">option</span><span style="color: #0000ff;">&gt;</span>--è¯·é€‰æ‹©çœä»½--<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">option</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">select</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></span></code></pre>

<p><span style="font-size: 18px;">&nbsp;</span></p>
<p><span style="font-size: 18px;"><strong>é…ç½®æ–‡ä»¶</strong></span></p>
<pre><code><span style="font-size: 18px;">driverClassName=com.mysql.jdbc.Driver</span><br /><span style="font-size: 18px;">url=jdbc:mysql:///jedis</span><br /><span style="font-size: 18px;">username=root</span><br /><span style="font-size: 18px;">password=root</span><br /><span style="font-size: 18px;">initialSize=5</span><br /><span style="font-size: 18px;">maxActive=10</span><br /><span style="font-size: 18px;">maxWait=3000</span><br /><br /><br /></code></pre>
<pre><code><span style="font-size: 18px;">host=localhost</span><br /><span style="font-size: 18px;">port=6379</span><br /><span style="font-size: 18px;">maxTotal=50</span><br /><span style="font-size: 18px;">maxIdle=10</span></code></pre>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>